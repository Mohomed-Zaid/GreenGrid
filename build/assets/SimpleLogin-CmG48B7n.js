import{r as o,j as e,e as S,f as E,g as F,J as L,h as B,v as P,k as u,K as T,N as A,B as g,O as f,Q as D}from"./index-5qNp6ZIp.js";import{L as p}from"./label-BfdL6PN0.js";import{A as j,a as b}from"./alert-Bdsz_1Oe.js";import{E as I}from"./eye-off-CHhgOuNt.js";import{E as R}from"./eye-BKVRQsOM.js";const H=()=>{const[a,y]=o.useState({email:"",password:""}),[c,w]=o.useState(!1),[s,i]=o.useState(!1),[n,t]=o.useState(null),[h,d]=o.useState(!1),x=l=>{const{name:r,value:m}=l.target;y(C=>({...C,[r]:m})),n&&t(null)},N=()=>a.email?a.email.includes("@")?a.password?a.password.length<6?(t({field:"password",message:"Password must be at least 6 characters"}),!1):!0:(t({field:"password",message:"Password is required"}),!1):(t({field:"email",message:"Please enter a valid email address"}),!1):(t({field:"email",message:"Email is required"}),!1),v=async l=>{if(l.preventDefault(),!!N()){i(!0),t(null);try{console.log("🔐 Attempting login...");const r=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const m=await r.json();console.log("✅ Login successful:",m),d(!0),setTimeout(()=>{window.location.hash="#dashboard"},1500)}else throw new Error("Invalid credentials")}catch(r){console.error("❌ Login failed:",r),t({message:"Invalid email or password. Please try again."})}finally{i(!1)}}},k=async()=>{i(!0);try{const r=await(await fetch("http://localhost:5000/api/health")).json();console.log("✅ Backend Response:",r),d(!0),setTimeout(()=>d(!1),3e3)}catch(l){console.error("❌ Backend Error:",l),t({message:"Backend connection failed. Please check if the server is running."})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(S,{className:"shadow-2xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(E,{className:"space-y-1 pb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🌱"})})}),e.jsx(F,{className:"text-2xl font-bold text-center text-gray-900",children:"Welcome to GreenGrid"}),e.jsx(L,{className:"text-center text-gray-600",children:"Sign in to your account to manage your community's waste"})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs(B,{className:"space-y-6",children:[n&&!h&&e.jsx(j,{variant:"destructive",children:e.jsx(b,{children:n.message})}),h&&e.jsx(j,{className:"border-green-200 bg-green-50",children:e.jsx(b,{className:"text-green-800",children:a.email?"Login successful! Redirecting...":"Backend connection successful!"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(u,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:a.email,onChange:x,className:`pl-10 h-11 ${n?.field==="email"?"border-red-300 focus:border-red-500":""}`,disabled:s})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(u,{id:"password",name:"password",type:c?"text":"password",placeholder:"Enter your password",value:a.password,onChange:x,className:`pl-10 pr-10 h-11 ${n?.field==="password"?"border-red-300 focus:border-red-500":""}`,disabled:s}),e.jsx("button",{type:"button",onClick:()=>w(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:s,children:c?e.jsx(I,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500",disabled:s}),e.jsx("span",{className:"text-sm text-gray-600",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-green-600 hover:text-green-700 font-medium",disabled:s,children:"Forgot password?"})]})]}),e.jsxs(A,{className:"flex flex-col space-y-4",children:[e.jsx(g,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx(D,{className:"ml-2 h-4 w-4"})]})}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"flex-1 border-t border-gray-200"}),e.jsx("span",{className:"px-3 text-sm text-gray-500",children:"or"}),e.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),e.jsx(g,{type:"button",variant:"outline",onClick:k,className:"w-full h-11 border-gray-200 hover:bg-gray-50",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):"Test Backend Connection"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["Don't have an account?"," ",e.jsx("button",{type:"button",className:"text-green-600 hover:text-green-700 font-medium",onClick:()=>window.location.hash="#register",disabled:s,children:"Sign up"})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:e.jsx("p",{children:"Backend: http://localhost:5000 • Frontend: http://localhost:3001"})})]})})};export{H as default};
